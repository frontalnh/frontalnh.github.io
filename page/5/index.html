<!DOCTYPE html>
<html class="has-navbar-fixed-top">

<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Jake.Lee&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="google-site-verification" content="PgpnJMuvO-IqYWyFljnyr-tusLhJUz1VRMmECenJyHE">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">






<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="/css/style.css">
<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

</head>

<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/archives">Archives</a>
            
            <a class="navbar-item " href="/categories">Categories</a>
            
            <a class="navbar-item " href="/tags">Tags</a>
            
            <a class="navbar-item " href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" href="https://github.com/frontalnh">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

        <section class="section">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6354931397950820",
    enable_page_level_ads: true
  });
</script>

    <div class="container">
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/18/supertest-를-활용한-typescript-기반-node-js-e2e-테스트/" itemprop="url">
                supertest 를 활용한 typescript 기반 node.js e2e 테스트
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-18T08:59:39.000Z" itemprop="datePublished">
                8 months ago
            </time>
        </span>
        
            <span class="column is-narrow article-category">
                <i class="far fa-folder"></i>
                <a class="article-category-link" href="/categories/supertest/">supertest</a><span>></span><a class="article-category-link" href="/categories/supertest/typescript/">typescript</a>
            </span>
            
                
                    <span class="column is-narrow">
                        
                            
                                12 minutes read (About 1850 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <!--toc-->
<h2><span id="what-is-supertest">What is supertest</span></h2><p>Node.js 에서 express 를 이용하여 서버를 개발함에 있어, rest api 를 테스트 하기 위해서는 실제로 서버에 요청을 보내고 클라이언트에 원하는 데이터가 전송되는 것을 확인해야 한다.</p>
<p>이러한 e2e 테스트를 위해서는 실제 서버를 띄운 뒤에 해당 서버로 요청을 날려 보면서 테스트를 진행해야 하며, 이렇게 가상의 서버를 띄워주고 express web server 에 대해 e2e 테스트를 가능하게 해주는 것이 바로 <code>supertest</code> 이다.</p>
<p>본 포스트에서는 그 중에서도 일반 <code>javascript</code>가 아닌 <code>typescript</code> 환경에서의 e2e 테스트 코드 작성법에 대해 알아보고자 하며, 테스트를 위해서는 페이스북에서 만든 잘나가는 프레임웍인 <code>jest</code>와 <code>typescript 배포판인 ts-jest</code> 를 사용한다.</p>
<h2><span id="prerequisition">Prerequisition</span></h2><p>먼저 타입스크립트로 작성된 프로그램은 javascript 기반의 테스트 환경인 jest 로는 테스트를 작동시킬 수가 없기 때문에, ts-jest 패키지를 dev 환경에 설치해 주어야 jest 가 <code>typescript</code> 코드를 읽고 실행할 수 있다.  </p>
<p>다음과 같이 <code>ts-ject</code>, <code>supertest</code>, <code>@types/supertest</code>를 설치해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev ts-jest</span><br><span class="line">npm install --save-dev supertest</span><br><span class="line">npm install --save-dev @types/supertest</span><br></pre></td></tr></table></figure>
<p>여기서 한가지 문제가 있는데, 아직 typescript supertest 의 경우 여러 패키지들과의 문제를 보이고 있다.</p>
<p>단편적인 예로 XMLHttpRequest 를 찾지 못하는 현상이 있는데, 이는 다음 설정을 tsconfig.json 에 해줌으로써 해결된다.<br>다음과 같이 dom 을 앞에다 추가해 주자. <strong>반드시 첫번째로 해야한다.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    compilerOptions:&#123;</span><br><span class="line">        &quot;lib&quot;:[&quot;dom&quot;,&quot;es2015]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위처럼 ts-jest를 설치했다면 이제 typescript 코드를 jest 에서 돌릴수 있게 된다.</p>
<p>본 프로젝트에서는 ts-jest 는 내부적으로 js 의 es6 문법을 컴파일 하기 위해 babel loader 를 사용하기 때문에 다음과 같이 babel env 를 설치하고 babel configuration 을 다음과 같이 해주어야 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-preset-env</span><br></pre></td></tr></table></figure>
<p>.babelrc</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    presets:["env"]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="setup-jest-configuration">Setup jest configuration</span></h4><p>Jest 세팅은 tsconfig.json 에서도 할 수 있고 jest.config.js 파일에서도 할 수 있다.</p>
<p>이 경우 반드시 한쪽에서만 해야 문제가 발생하지 않기때문에 유념한다.</p>
<p>Jest 는 typescript 를 컴파일 하지 않고 파일별로 컴파일과 실행을 동시에 처리하기 때문에, module alias 를 사용하였다면, 해당 파일이 어디에 있는지를 가르쳐 주어야 한다.</p>
<p>아래 코드에서는 moduleNameMapper 를 통해 module alias 를 발견하면 어디에서 해당 파일을 찾을 수 있는지 jest 에게 가르쳐 준다.</p>
<p>또한 ts-jest preset 를 사용한다는 것을 명시하고 있다.</p>
<p>jest.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  preset: <span class="string">'ts-jest'</span>,</span><br><span class="line">  testEnvironment: <span class="string">'node'</span>,</span><br><span class="line">  moduleNameMapper: &#123;</span><br><span class="line">    <span class="string">'^@domain/(.*)$'</span>: <span class="string">'&lt;rootDir&gt;/src/server/domain/$1'</span>,</span><br><span class="line">    <span class="string">'^@common/(.*)$'</span>: <span class="string">'&lt;rootDir&gt;/src/server/common/$1'</span>,</span><br><span class="line">    <span class="string">'^@utils/(.*)$'</span>: <span class="string">'&lt;rootDir&gt;/src/server/utils/$1'</span>,</span><br><span class="line">    <span class="string">'^@infra/(.*)$'</span>: <span class="string">'&lt;rootDir&gt;/src/server/infra/$1'</span>,</span><br><span class="line">    <span class="string">'^@api/(.*)$'</span>: <span class="string">'&lt;rootDir&gt;/src/server/api/$1'</span>,</span><br><span class="line">    <span class="string">'^@interfaces/(.*)$'</span>: <span class="string">'&lt;rootDir/src/server/interfaces/$1'</span>,</span><br><span class="line">    <span class="string">'^@root/(.*)$'</span>: <span class="string">'&lt;rootDir&gt;/src/server/$1'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  transform: &#123;</span><br><span class="line">    <span class="string">'^.+\\.jsx?$'</span>: <span class="string">'babel-jest'</span>,</span><br><span class="line">    <span class="string">'^.+\\.(ts|tsx)$'</span>: <span class="string">'ts-jest'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  moduleFileExtensions: [<span class="string">'ts'</span>, <span class="string">'tsx'</span>, <span class="string">'js'</span>, <span class="string">'node'</span>, <span class="string">'json'</span>],</span><br><span class="line">  testMatch: [<span class="string">'**/*.test.+(ts|tsx|js)'</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>여기서 moduleFileExtensions의 경우 typescript 테스트만을 진행하는 경우에는 tx, tsx, js 만 명시해주어도 되지만, 기본적인 node 가 제공하는 확장자인 json, node 등도 추가하여야 여러 패키지를 사용함에 있어 문제가 없다.</p>
<h2><span id="getting-started">Getting started</span></h2><h4><span id="how-to-setup-express-application">how to setup express application</span></h4><p>Supertest 는 express application 객체를 받아서 내부적으로 서버를 listen 하기 때문에 supertest를 할 때마다 이런 express application을 주입시켜 주어야 한다. 어찌보면 단순한 일이지만 사실 실제 서버의 경우 express application 을 초기화하는 일련의 과정이 존재하기 때문에 이 작업을 해주는 것이 다소 까다로울 수 있다.</p>
<p>또한, 대부분의 REST API 테스트의 경우 인증된 사용자에 대해서만 요청을 처리하는 authentication 기능이 있기 때문에, 테스트를 진행하기 전에 jwt 토큰 발급 및 회원가입 등 authentication 관련 문제들을 해결해야 한다.</p>
<p>때문에, 본 문서에서는 이런 <code>기본적인 express application initializing 과 authentication 을 도와주는 helper 클래스인 TestHelper 클래스</code>를 먼저 구현하여 supertest 를 하도록 한다.</p>
<p>app.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> App &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">async</span> setup(): <span class="built_in">Promise</span>&lt;express.Express&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> app = express();</span><br><span class="line">        app.use();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> app;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>testHelper.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> TestHelper &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 테스트에 필요한 유저를 만들어 주는 함수이다.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @param id 유저의 아이디</span></span><br><span class="line"><span class="comment">   * @param password 유저의 비밀번호</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">async</span> generateTestUser(</span><br><span class="line">    id: <span class="built_in">string</span>,</span><br><span class="line">    password: <span class="built_in">string</span></span><br><span class="line">  ): <span class="built_in">Promise</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 필자는 일련의 회원가입을 담당하는 userService 에서 </span></span><br><span class="line"><span class="comment">     * 회원가입을 처리하고 있다.</span></span><br><span class="line"><span class="comment">     * 이 부분은 독자가 임의적으로 회원가입 로직을 구현하면 된다.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">let</span> user = <span class="keyword">await</span> userService.createUser(</span><br><span class="line">      id,</span><br><span class="line">      password</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @param id 유저의 아이디</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">async</span> generateJwt(id) &#123;</span><br><span class="line">    <span class="keyword">let</span> jwtPayload = <span class="keyword">new</span> JwtPayload(id);</span><br><span class="line">    <span class="keyword">return</span> encodeJwt(jwtPayload);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">async</span> getApp(): <span class="built_in">Promise</span>&lt;express.Express&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> APP = <span class="keyword">new</span> App();</span><br><span class="line">    <span class="keyword">let</span> app = <span class="keyword">await</span> APP.setup();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> testHelper = <span class="keyword">new</span> TestHelper();</span><br></pre></td></tr></table></figure>
<p>위처럼 express appilcation 을 비동기적으로 세팅해주는 helper 함수들을 구현하였다면 아래와 같이 모든 테스트 코드를 작성하기 전에 위의 app을 초기화 해준다.</p>
<p>모든 테스트 이전에 다양한 환경을 세팅해주기 위해 <code>beforeAll()</code> 를 이용하는데, 이는 모든 테스트 전에 해야할 일들을 명시하고 세팅해 준다. 만약, <code>비동기적인 작업을 beforeAll 에서 해야 할 필요가 있다면</code> 다음과 같은 방법이 있다.</p>
<ol>
<li>Promise 를 return 해주는 방법</li>
<li>Async/Await 을 사용하는 방법</li>
<li>Done 인자를 받아 사용하는 방법</li>
</ol>
<p>아래 코드에서<code>before all 부분에서 바로 promise 를 리턴</code>하는 방식과 <code>Async/Await</code> 방식을 보여주고 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">'return promise'</span>,<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> app;</span><br><span class="line">    </span><br><span class="line">    beforeAll(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> testHelper.getApp().then(_app=&gt;&#123;</span><br><span class="line">            app = _app;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    describe(<span class="string">'POST: /users'</span>,<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> request(app).post(<span class="string">'api/v1/users'</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">describe(<span class="string">'example test'</span>,<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> app;</span><br><span class="line">    </span><br><span class="line">    beforeAll(<span class="keyword">async</span>()=&gt;&#123;</span><br><span class="line">        app = <span class="keyword">await</span> testHelper.getApp()</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    describe(<span class="string">'POST: /users'</span>,<span class="keyword">async</span>()=&gt;&#123;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> request(app).post(<span class="string">'api/v1/users'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>이렇게 테스트를 돌리게 되면, <strong>테스트는 끝이 났는데 프로세스는 계속해서 동작하고 있다는 에러를 볼 수 있다.</strong></p>
<p>이는 데이터베이스 등처럼 connection 객체가 살아있는 경우 해당 프로세스가 종료되지 않기 때문인데, 이 때문에 다음과 같이 테스트가 끝난 이후에 <code>application</code> 내의 데이터베이스 커넥션을 끊어주면 해당 경고가 없어진다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">''</span>,()=&gt;&#123;</span><br><span class="line">    <span class="keyword">let</span> app;</span><br><span class="line">    </span><br><span class="line">    beforeAll(<span class="keyword">async</span>()=&gt;&#123;</span><br><span class="line">        app = <span class="keyword">await</span> testHelper.getApp()</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    afterAll(<span class="keyword">async</span>()=&gt;&#123;</span><br><span class="line">        app.closeApp()</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4><span id="여러-파일에서의-beforeall-작업">여러 파일에서의 beforeAll 작업</span></h4><p>위처럼 모든 테스트파일에서 setup 을 진행하면, 각 setup 은 jest 의 특성상 비동기적으로 동작하게 되기 때문에, 만약 db 등을 조작한다면 confict 이 날 수 있다.</p>
<p>즉, 만약 모든 테스트를 통틀어 한번 데이터를 세팅하고자 한다면 다음과 같이 별도의 setup.js 파일을 만들어 전체 테스트 실행 전에 돌려주는 것이 좋다.</p>
<p>setup.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mysql);</span><br><span class="line"><span class="keyword">var</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  host: <span class="string">'localhost'</span>,</span><br><span class="line">  user: <span class="string">'root'</span>,</span><br><span class="line">  password: <span class="string">'test1234'</span>,</span><br><span class="line">  database: <span class="string">'test'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.connect();</span><br><span class="line"></span><br><span class="line">connection.query(<span class="string">'DELETE FROM user;'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">error, results, fields</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line">&#125;);</span><br><span class="line">connection.end();</span><br></pre></td></tr></table></figure>
<p>위 스크립트 파일을 시작하도록 package.json 에 등록해준다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"scripts"</span>:&#123;</span><br><span class="line">        <span class="attr">"test"</span>:<span class="string">"node ./setup.js &amp;&amp; jest"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/18/typescript-시작하기/" itemprop="url">
                typescript 시작하기
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-18T07:48:03.000Z" itemprop="datePublished">
                8 months ago
            </time>
        </span>
        
                
                    <span class="column is-narrow">
                        
                            
                                a few seconds read (About 0 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <p>##</p>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/18/Getting-started-with-javascript/" itemprop="url">
                Getting started with javascript
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-18T07:20:40.000Z" itemprop="datePublished">
                8 months ago
            </time>
        </span>
        
            <span class="column is-narrow article-category">
                <i class="far fa-folder"></i>
                <a class="article-category-link" href="/categories/javascript/">javascript</a>
            </span>
            
                
                    <span class="column is-narrow">
                        
                            
                                5 minutes read (About 745 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <h2><span id="how-does-it-works">How does it works</span></h2><p>자바스크립트를 기본적으로 chrome 브라우저에서 실행되는 script 언어로 시작하였으나, node.js 라는 런타임 환경이 나온 이후로 브라우저 밖에서도 javascript를 사용할 수 있게 되었다.</p>
<p>아무래도 브라우저 내에서 사용되던 언어인 만큼 window 라는 전역 object 가 context의 root 역할을 수행한다.</p>
<p>런타임 환경 내에서 실행되는 모든 변수는 window 라는 전역 객체에 그 상태가 기록되며, 브라우저에서 동작하는 성격상 브라우저의 창 즉, window 가 런타임 환경에서 최상위 root context 가 된다. 기본적으로 html 이라는 사용자가 보는 가시적인 페이지와 연동되기 위해 <code>event</code> 라는 개념을 사용하며, 사용자가 브라우저에서 하는 모든 활동은 event 를 발생시키며, 각 이벤트가 발생하면 수행되는 일련의 함수의 집합으로 프로그램이 구성된다.</p>
<p>이러한 <code>event</code> 를 듣고 수행하는 것들을 일컬어 <code>event target</code> 이라고 하며, 이러한 <code>event target</code> 으로는 root context 인 <code>window</code> 객체 이외에도 <code>document, element</code> 객체가 있다.</p>
<p>각 객체들은 <code>addEventListener</code> 함수를 통해 특정 이벤트가 발생할때 실행할 함수들을 등록할 수 있으며, 이를 통해 web page 와 사용자가 상호작용을 하게 된다.</p>
<p>또한, javascript runtime environment 인 node.js 는 각종 패키지들을 사용할 수 있는데, 여기서 node 는 실행하는 루트의 package.json 파일을 참조하여 노드 모듈을 참조하고 실행하며, 때문에 실행하는 위치의 root 에 package.json 파일이 있어야만 패키지들을 찾고 실행할 수 있기 때문에 이를 유의하여야 한다.</p>
<h2><span id="javascript-modules">Javascript modules</span></h2><p>npm 패키지를 사용하기위한 설정을 package.json    에 설정해 준다.</p>
<h4><span id="path-alias-사용하기">path alias 사용하기</span></h4><p>package.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">"_moduleAliases"</span>: &#123;</span><br><span class="line">    <span class="attr">"@domain"</span>: <span class="string">"dist/domain"</span>,</span><br><span class="line">    <span class="attr">"@infra"</span>: <span class="string">"dist/infra"</span>,</span><br><span class="line">    <span class="attr">"@util"</span>: <span class="string">"dist/util"</span>,</span><br><span class="line">    <span class="attr">"@common"</span>: <span class="string">"dist/common"</span>,</span><br><span class="line">    <span class="attr">"@interfaces"</span>: <span class="string">"dist/interfaces"</span>,</span><br><span class="line">    <span class="attr">"@utils"</span>: <span class="string">"dist/utils"</span>,</span><br><span class="line">    <span class="attr">"@api"</span>: <span class="string">"dist/api"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="multithreading">Multithreading</span></h2><p>Javascript 는 기본적으로 single thread 방식으로 동작한다.</p>
<p>즉, 하나의 프로세스 내에서도 하나의 단일 스레드 내에서 동작하는 것을 기본으로 한다.</p>
<p>하지만, 브라우저 내에서 데이터를 로드하면서 화면을 전환하거나 혹은 화려한 ui 를 그리는 도중에도 사용자와의 interaction 을 해서 편의를 높이는 등 다양한 부분에 있어 병렬처리에 대한 필요성이 대두되었으며, 브라우저는 <code>Web Worker</code> 라는 개념을 통해 병렬처리를 가능하도록 하였다.</p>
<p><code>web worker</code> 는 현재 실행중인 <code>main thread</code> 와 병렬적으로 <code>background thread</code> 에서 특정 작업을 수행하여 병렬적으로 특정 task 를 수행할 수 있게 해 준다.</p>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/17/12-factor-app-시작하기/" itemprop="url">
                12 factor app 시작하기
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-17T07:41:27.000Z" itemprop="datePublished">
                8 months ago
            </time>
        </span>
        
                
                    <span class="column is-narrow">
                        
                            
                                9 minutes read (About 1360 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <!-- toc -->
<ul>
<li><a href="#1-codebase">1. codebase</a><ul>
<li><a href="#introduction-of-git-flow">Introduction of git flow</a></li>
<li><a href="#start-programming-with-a-feature-branch">Start programming with a feature branch</a></li>
<li><a href="#release-version">release version</a></li>
<li><a href="#hotfix">hotfix</a></li>
</ul>
</li>
<li><a href="#2-dependencies">2. Dependencies</a></li>
<li><a href="#3-configuration">3. Configuration</a></li>
<li><a href="#4-backing-services">4. Backing services</a></li>
</ul>
<!-- tocstop -->
<h2><span id="1-codebase">1. codebase</span></h2><p>모든 어플리케이션 코드는 version control system 을 통해 하나로 관리되어야 한다.</p>
<p>가령 여러개의 루트 repository 가 있다면 이것은 앱이 아니라 하나의 분산 시스템에 가까울 것이다.</p>
<p>하나의 코드베이스에서 여러개의 배포를 진행할 수 있고, 각 배포버전별로 코드 버전이 관리된다면 훌륭할 것이다.</p>
<h4><span id="introduction-of-git-flow">Introduction of git flow</span></h4><p>일반적인 프로젝트에서 이러한 버전관리는 훌륭한 버전관리 툴인 git 을 사용해서 진행하며 git flow 는 훌륭한 워크플로우를 제공한다.</p>
<p>install git flow on Mac</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git-flow</span><br></pre></td></tr></table></figure>
<p>start git flow project</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git flow init</span><br></pre></td></tr></table></figure>
<p>다음은 git flow 에서 브랜치의 종류와 그 역할에 대해 알려준다.</p>
<p><strong>master branch</strong> 는 실제 공식 배포버전을 관리하며 일반적으로 production deploy 버전을 관리한다.</p>
<p><strong>feature branch</strong> 는 실제 각 개발자들이 작업을 하는 브랜치이며, 이는 <code>develop</code> 브랜치에서 갈라져 나오고 추후 다시 <code>develop</code> 브랜치로 병합된다.</p>
<p><strong>develop</strong> 브랜치는 각 개발자들이 작업한 브랜치들이 머지되는 장소이며 모든 커밋의 내용이 기록된다.</p>
<p><strong>release branch</strong> 는 develop 브랜치로 부터 당겨져오며 여기에서는 오직 버그 수정이나 혹은 documentation 수정 등 release 와 관련된 작업들만 수행된다. 이를 통해 특정 팀에서 해당 release 버전으로 테스트 혹은 출시준비과정을 진행하는 동안 다른 브랜치에서 작업을 수행하며, 다음 release 전까지 해결될 사항들을 정리할 수 있다. 해당 브랜치는 develop 으로부터 갈라져 나온다. <code>만약 코드리뷰를 한다면 해당 브랜치에서 하는 것이 가장 깔끔해 보인다.</code></p>
<p><strong>hotfix branch</strong> hotfix 브랜치는 바로 master branch 에서 갈라져 나와 빠른 버그 수정 등을 수행하는 branch 이며, 버그가 수정되면 재빨리 다시 master 브랜치로 머지되어야 한다. <code>이 브랜치는 master 브랜치로부터 갈라져 나오는 유일한 브랜치이다.</code></p>
<h4><span id="start-programming-with-a-feature-branch">Start programming with a feature branch</span></h4><p>아래 명령어로 새로운 develop 브랜치로 부터 feature 브랜치를 만들어서 갈라져 나온다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 로컬에 새 브랜치 생성</span></span><br><span class="line">git flow feature start branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 리모트 브랜치에 배포</span></span><br><span class="line">git flow feature publish branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 새로운 내용을 커밋</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"content"</span></span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"><span class="comment"># 머지를 요청하기 전에 반드시 리베이스를 받는다</span></span><br><span class="line">git pull -r origin develop</span><br><span class="line"></span><br><span class="line"><span class="comment"># feature 브랜치 머지</span></span><br><span class="line">git feature finish branch_name</span><br></pre></td></tr></table></figure>
<h4><span id="release-version">release version</span></h4><p>새로운 버전을 출시하기 위한 git flow 코드는 다음과 같다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from develop branch</span></span><br><span class="line">git flow release start 0.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># from release branch</span></span><br><span class="line">git flow release finish 0.0.1</span><br></pre></td></tr></table></figure>
<h4><span id="hotfix">hotfix</span></h4><p>공식 배포 버전에서 빠른 버그 수정을 위한 hotfix 브랜치에서 작업을 하는 과정은 다음과 같다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git flow hotfix start hotfix_branch</span><br><span class="line">git flow hotfix finish hotfix_branch</span><br></pre></td></tr></table></figure>
<h2><span id="2-dependencies">2. Dependencies</span></h2><p>어플리케이션을 작성함에 있어 다양한 외부 라이브러리들에 의존하게 된다.</p>
<p>특히 각 언어별로 존재하는 패키지 매니저를 사용한다면 글로벌하게 설치되는 패키지도 있고 내부적으로 설치되는 패키지도 있는데 이처럼 글로벌하게 설치되는 패키지의 경우 시스템 환경에 어플리케이션이 의존하게 되는 문제가 있다.</p>
<p>12 factor app 에서는 이러한 시스템 환경에 전혀 의존하지 않는 프로그램을 작성함을 원칙으로 한다.</p>
<p>가령 node.js 환경에서 어플리케이션을 개발하는 경우 npm 패키지를 설치함에 있어 package.json 이라는 패키지 관리 documentation 을 하게 된다. 이처럼 의존하는 dependency 를 명확하게 명시하여서 다른 시스템 환경에서도 바로 빌드가 되어 오류없이 프로그램이 실행하도록 한다.</p>
<h2><span id="3-configuration">3. Configuration</span></h2><p>대부분의 경우 어플리케이션은 배포할때마다 다른 configuration 이 필요하게 된다.</p>
<p>가령 develop server 의 경우 develop database 에 연결되어야 하고, production server의 경우 production database에 연결되어야 하는 것처럼 어플리케이션의 소스코드와는 달리 이러한 설정 값들은 배포마다 달라지게 된다.</p>
<p>때문에, 12 factor app 에서는 이러한 설정값을 코드베이스에 포함시키는 것을 엄격하게 금지하고 있으며, 이러한 모든 설정들을 environment variable 에 저장하는 것을 추천한다.</p>
<p>이러한 env variable 들은 여러 deployment setting 에 대해 혼합된 정보를 절대 가지지 않으며 각 배포환경마다 독립되게 존재하여야 한다.</p>
<h2><span id="4-backing-services">4. Backing services</span></h2><p>가령 이메일 서버나 혹은 데이터 베이스와 같이 어플리케이션이 동작하는데 필요한 부수적인 다른 서비스들을 backing service 라고 부른다.</p>
<p>이러한 backing service 들은 언제나 장애가 생길 수 있으므로 12 factor app 에서는 그 어떤 코드의 변경 없이 백업으로 준비된 backing service 에 붙을 부 있어야 한다.</p>
<p><a href="https://12factor.net/" target="_blank" rel="noopener">참조 - 12 factor app</a></p>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/16/rabbitmq-시작하기/" itemprop="url">
                rabbitmq 시작하기
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-16T08:15:57.000Z" itemprop="datePublished">
                8 months ago
            </time>
        </span>
        
            <span class="column is-narrow article-category">
                <i class="far fa-folder"></i>
                <a class="article-category-link" href="/categories/rabbitmq/">rabbitmq</a>
            </span>
            
                
                    <span class="column is-narrow">
                        
                            
                                4 minutes read (About 640 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <h1><span id="rabbitmq-시작하기">RabbitMQ 시작하기</span></h1><h2><span id="installation-on-ubuntu">Installation on ubuntu</span></h2><p>ubuntu 에 rabbitmq 를 설치하고 실제 동작시켜 보자.</p>
<p>본 글에서는 실제 ubuntu 피씨가 아닌 docker ubuntu image 를 사용하도록 한다.</p>
<h4><span id="ubuntu-image-실행">Ubuntu image 실행</span></h4><p>아래 명령어를 통해 도커 우분투 이미지를 실행하고 콘솔에 들어가도록 하자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu</span><br><span class="line">docker run -it ubuntu</span><br></pre></td></tr></table></figure>
<h4><span id="sudo-및-curl-설치">sudo 및 curl 설치</span></h4><p>기본 우분투 이미지에는 sudo 와 curl 명령어가 없기 때문에 아래 명령어를 통해 sudo 와 curl 을 설치해 준다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get update&amp;&amp;</span><br><span class="line">apt-get install -y sudo &amp;&amp;</span><br><span class="line">apt-get -y install curl</span><br></pre></td></tr></table></figure>
<h4><span id="erlangotp-다운로드">Erlang/OTP 다운로드</span></h4><p>Rabbitmq 를 내부적으로 erlang/otp 를 사용하기 때문에 적합한 버젼을 설치해 주어야 한다.</p>
<p>하지만 현재 erlang 버전은 너무 오래되었기 때문에 rabbitmq 팀에서 별도의 erlang 을 관리하고 배포하고 있는데 이를 설치하기 위해 다음과 같은 절차를 거친다.</p>
<p>먼저 apt-key 에 다음 키를 추가한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y gnupg2 &amp;&amp;</span><br><span class="line">apt-key adv --keyserver <span class="string">"hkps.pool.sks-keyservers.net"</span> --recv-keys <span class="string">"0x6B73A36E6026DFCA"</span></span><br></pre></td></tr></table></figure>
<p>데비안 계열 운영체제가 레포지토리를 등록하기 위해서 다음 파일에 레포지토리를 등록해 주어야 한다.</p>
<p>이를 통해 apt-get 명령어가 해당 레포지토리를 찾고 패키지를 설치할 수 있다.</p>
<p>/etc/apt/sources.list.d/bintray.erlang.list 파일에</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://dl.bintray.com/rabbitmq-erlang/debian bionic erlang</span><br></pre></td></tr></table></figure>
<p>를 추가하면 되며 아래와 같은 명령어를 통해 한번에 세팅할 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/apt/sources.list.d &amp;&amp;</span><br><span class="line">touch bintray.erlang.list &amp;&amp;</span><br><span class="line">echo &quot;deb http://dl.bintray.com/rabbitmq-erlang/debian bionic erlang&quot; &gt;&gt; bintray.erlang.list &amp;&amp;</span><br><span class="line">echo register finished! &amp;&amp;</span><br><span class="line">cat bintray.erlang.list</span><br></pre></td></tr></table></figure>
<p>등록한 레포지토리를 설치해준다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br></pre></td></tr></table></figure>
<h4><span id="rabbitmq-및-rabbitmq-server-설치">RabbitMQ 및 rabbitmq-server 설치</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">curl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.deb.sh | sudo bash &amp;&amp; apt-get install -y rabbitmq-server</span><br></pre></td></tr></table></figure>
<h2><span id="getting-started">Getting started</span></h2><p>서버 시작하기</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl stop_app</span><br><span class="line">rabbitmqctl reset</span><br><span class="line">rabbitmqctl start_app</span><br></pre></td></tr></table></figure>
<p>큐 비우기</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rabbitmqctl purge_queue queue_name</span><br></pre></td></tr></table></figure>
<h2><span id="final-dockerfile">Final dockerfile</span></h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># set working directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment"># update apt packages</span></span></span><br><span class="line"><span class="bash">RUN rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="bash">RUN apt-get update</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment"># install sudo and curl command</span></span></span><br><span class="line"><span class="bash">RUN apt-get install -y sudo &amp;&amp; apt-get -y install curl</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment"># register key for apt third party repository</span></span></span><br><span class="line"><span class="bash">RUN apt-get install -y gnupg2</span></span><br><span class="line"><span class="bash">RUN apt-key adv --keyserver <span class="string">"hkps.pool.sks-keyservers.net"</span> --recv-keys <span class="string">"0x6B73A36E6026DFCA"</span></span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment"># register repository</span></span></span><br><span class="line"><span class="bash">RUN <span class="built_in">cd</span> /etc/apt/sources.list.d &amp;&amp; touch bintray.erlang.list &amp;&amp; <span class="built_in">echo</span> <span class="string">"deb http://dl.bintray.com/rabbitmq-erlang/debian bionic erlang"</span> &gt;&gt; bintray.erlang.list &amp;&amp; <span class="built_in">echo</span> register finished! &amp;&amp; cat bintray.erlang.list</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment"># install repository</span></span></span><br><span class="line"><span class="bash">RUN apt-get update</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">RUN curl -s https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.deb.sh | sudo bash</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">RUN apt-get install -y rabbitmq-server</span></span><br><span class="line"><span class="bash">EXPOSE 3001</span></span><br><span class="line"><span class="bash">EXPOSE 5672</span></span><br><span class="line"><span class="bash">EXPOSE 15672</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">CMD [ <span class="string">"rabbitmq-server"</span>,<span class="string">"start"</span> ]</span></span><br></pre></td></tr></table></figure>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/15/beanstalk-시작하기/" itemprop="url">
                Beanstalk 시작하기
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-15T06:13:41.000Z" itemprop="datePublished">
                8 months ago
            </time>
        </span>
        
                
                    <span class="column is-narrow">
                        
                            
                                3 minutes read (About 418 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <h2><span id="installation">Installation</span></h2><p>Eb 를 설치하기 위해 awscli 와 awsebcli 를 설치해 준다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install awscli</span><br><span class="line">pip install awsebcli --upgrade --user</span><br><span class="line">brew install awsebcli</span><br></pre></td></tr></table></figure>
<p>elastic beanstalk 을 초기화 하고 생성 및 배포한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eb init</span><br><span class="line">eb create</span><br><span class="line">eb deploy</span><br></pre></td></tr></table></figure>
<h2><span id="configuration">Configuration</span></h2><p>Beanstalk 을 통해 어플리케이션을 배포하게 되면 여러개의 </p>
<h2><span id="filebeat-와-함께-배포하기">filebeat 와 함께 배포하기</span></h2><p>만약 프로젝트 내에서 Elastic Stack 을 사용하여 어플리케이션에서 나오는 모든 로그 및 데이터를 filebeat 를 통해서 배포해야 할 필요가 있다면, filebeat 와 함께 multi docker 모드를 사용하여 beanstalk 에 배포할 수 있다.</p>
<p>먼저, filebeat 를 단독으로 ECR(Elastic Container Resistry) 에 올린다.</p>
<p>이 과정에서 반드시 아마존에 로그인이 되어야 하며, 다음과 같은 명령어를 통해 ecr 에 별도로 로그인을 수행한다.</p>
<p>아래 명령어는 기본 aws 유저가 아닌 eb cli 접근이 가능한 프로그램 유저를 설정해 두고 해당 유저의 정보로 로그인을 함을 의미한다. 아래 명령어를 입력하면 AWS 에서 로그인을 하기 위한 명령어를 output 으로 제공하는데 해당 문자열을 복사하여 다시 cli에 입력하면 로그인이 완료된다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws ecr get-login --no-include-email --profile eb-cli</span><br></pre></td></tr></table></figure>
<p>아래 명령어를 통해 aws access key 와 secret key 를 등록하고 사용할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws configure</span><br></pre></td></tr></table></figure>
<p>다음과 같은 command option 을 통해 내가 어떤 사용자인지 알리고, 미리 configure 되어있는 해당 사용자의 정보로 authentication 을 진행할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws [<span class="built_in">command</span>] --profile 사용자이름</span><br></pre></td></tr></table></figure>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/15/vs-code-debugging-시작하기/" itemprop="url">
                VS Code Debugging 시작하기
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-15T04:50:05.000Z" itemprop="datePublished">
                8 months ago
            </time>
        </span>
        
            <span class="column is-narrow article-category">
                <i class="far fa-folder"></i>
                <a class="article-category-link" href="/categories/vscode/">vscode</a>
            </span>
            
                
                    <span class="column is-narrow">
                        
                            
                                a few seconds read (About 80 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <h1><span id="vs-code-debugging-시작하기">VS Code Debugging 시작하기</span></h1><p>vs code 에서 디버깅을 함에 있어 Launch 와 Attach 모드가 존재한다.</p>
<p>우리는 .vscode 의 launch.json 설정파일을 수정함으로써 디버거를 attach 하시 전에 디버그 모드에서 어떻게 앱을 실행할지를 알려주는 것이다.</p>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2019/01/12/medium-사토시-나카모토의-bitcoin-논문/" itemprop="url">
                사토시 나카모토의 Bitcoin 논문
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2019-01-12T02:42:35.000Z" itemprop="datePublished">
                9 months ago
            </time>
        </span>
        
            <span class="column is-narrow article-category">
                <i class="far fa-folder"></i>
                <a class="article-category-link" href="/categories/blockchain/">blockchain</a>
            </span>
            
                
                    <span class="column is-narrow">
                        
                            
                                17 minutes read (About 2611 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <h1><span id="사토시-나카모토의-bitcoin-논문">사토시 나카모토의 Bitcoin 논문</span></h1><p>이번 포스트에서는 현대의 블록체인 기술의 근간이 된 사토시 나카모토의 bitcoin 논문을 설명하고, 블록체인의 핵심 개념에 대해 적어보고자 합니다.</p>
<p>우리가 흔하게 오프라인상에서의 금전을 거래할때와는 다르게 인터넷상에서의 거래에는 기술적으로 해결할 수 없는 문제가 존재하는데 그것은 바로 특정 거래가 두번 일어나게 되어 존재하지 않던 재화가 전산상에 생겨나게 되는 것입니다. 이것이 어떻게 가능하냐고 할 수 있지만, 인터넷에서의 거래란 사실 데이터베이스라는 정보의 창고에 새로운 기록을 작성하고 있던 수치를 줄이거나 올리는 단순한 작업이기 때문에 전산상의 오류나 혹은 해커의 공격에 의해 내가 하지 않은 거래가 두번 기록이 될 수 있게됩니다. 이러한 문제를 <strong>double spending problem</strong> 이라고 하며, 궁극적으로 <strong>사토시는 이 double spending problem 을 해결하기 위한 연구를 시작합니다.</strong></p>
<p>사토시는 이를 해결하기 위해 매 시간의 timestamp를 기반으로 하는 p2p네트워크를 기반으로 모든 거래 정보는 블록화 되어 체인 구조로 연결되고 동기화되는 일종의 온라인 체인 시스템을 고안하게 됩니다. 즉, 온라인 상에서 일어나는 모든 거래에 그 시간을 ms 단위의 정밀도로 기록을 한 뒤에 온라인 상에서 모든 사람들이 합의를 하여 각 거래의 신뢰성을 판단하고 그 거래기록을 한데 모아 블록으로 만들어 이어붙인다면 모두가 인정할 수 있는 분산 원장을 만들 수 있지 않을까 라는 생각을 하게 된 것입니다.</p>
<p>이렇게 체인을 연결해 가는 과정에는 많은 컴퓨팅 파워가 필요하게 되었고, 가장 많은 CPU 파워를 가진 컴퓨터 집단이 가장 긴 체인을 생성할 수 있을 것이며 이를 신회하는 네트워크 구조가 바로 블록체인 네트워크 입니다.</p>
<p><strong>즉, 사토시 나카모토가 제안한 bitcoin의 궁극적이고 본질적인 목표는 제 3 기관의 개입 없이 화폐를 주고 받는 것이었습니다.</strong></p>
<h2><span id="블록체인-내에서의-거래-기록">블록체인 내에서의 거래 기록</span></h2><p>비트코인에에서 거래는 UTXO(Unspent Transaction Output) state model 에 따라 기록됩니다. 이는 이름 그대로 하나의 거래 내역에서 사용되지 않은 양을 통해서 자금의 상태를 기록함을 의미합니다.</p>
<p>즉, 비트코인에서 Transaction 이란 사용되고 남은 Bitcoint 의 양을 가지는 일종의 화폐 자체로 이해할 수 있습니다. 가령 5BTC 짜리 Transaction, 1BTC 짜리 트랜잭션처럼 각 Transaction 은 누군가에게 소유된 화폐로 이해할 수 있고, 그 화폐가  이미 소진되었다면 해당 화폐를 소진한 주체가 output 에 기록되고 아직 소진되지 않았다면 그 화폐를 소진할 수 있는 사용자의 주소가 명시되어 있다고 보면 됩니다.</p>
<p>다음은 실제 비트코인에서 Transaction Model 의 일부입니다.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTransaction</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;CTxIn&gt; vin;</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;CTxOut&gt; vout;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">const</span> uint256 hash;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위에서 알 수 있듯이 비트코인에서 하나의 Transaction 에는 Vin 과 Vout 이라는 값이 존재하며, 각 model 의 구조는 다음과 같습니다.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTxIn</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    COutPoint prevout;</span><br><span class="line">    CScript scriptSig;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTxOut</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    CAmount nValue;</span><br><span class="line">    CScript scriptPubKey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>각 속성을 하나씩 살펴보면, 거래를 이루는 것은 CTxIn 과 CTxOut 두가지로 구성되고, CTxIn 에는 해당 Transaction 이 어떤 Transaction 의 몇번째 output 을 기준으로 거래가 시작되는지를 나타내며 <code>COutPoint</code> 는 실제로 특정 Transaction 의 hash 값과 output 의 index 값을 통해 생성된 값입니다. <strong>ScriptSig</strong> 는 해당 화폐를 사용한 사용자의 서명으로 어떤 사용자가 해당 화폐를 사용하였는지를 나타내며, 이는 이전 Transaction  <code>CTxOut</code> 의 scriptPubKey 의 소유자가 서명한 서명입니다.</p>
<p><strong>CTxOut</strong> 의 nValue 속성은 실제 BTC 의 양이 명시되며 1억 분의 1 BTC 인 Satoshi 를 기준화폐로 사용합니다. scriptPubKey 는 해당 화폐를 사용할 수 있는 사용자의 address 이며, 해당 사용자가 이 Transaction 에 서명하여 다음 Transaction 에 기록함으로써 화폐를 사용할 수 있습니다.</p>
<p>여기서 중요한 사실을 알 수 있는데, 그것은 바로 <strong>블록체인 내에서 거래(transaction) 는 이전 거래의 정보(이전 transaction’has value) 를 포함하기 때문에 모든 거래는 시간 순으로 동기화 될 수 있다는 것입니다.</strong></p>
<p>이렇게 모든 거래의 내역들을 한데 모아 블록으로 저장하며, 특정 시간을 주기로 그 시간동안 일어난 모든 거래를 한데 모아 새롭게 블록을 생성하는 작업을 거치는데, 이는 각 거래를 일종의 트리 형태로 나열하고 이를 해쉬라고 불리는 암호화 과정을 거쳐 해시를 만들어 내는 것입니다. 그리고 새로운 블록을 생성함이란 이렇게 복잡하게 암호화된 해쉬값을 먼저 풀어낸 컴퓨터가 그 보상을 가지는 방식으로 기여를 하게 됩니다.</p>
<p>여기서 컴퓨터가 해쉬값을 풀어내는 것은 아주 단순하게 생각하면 무수히 많은 숫자와 문자열(nonce)을 계속해서 대입하면서 맞는 값이 나올때까지 대입해 보는 것이라 볼 수 있습니다.각 블록의 해쉬값을 먼저 풀어낸 노드가 새롭게 블록을 생성합니다.</p>
<p>이를 위해서는 엄청난 컴퓨팅 파워가 필요하며, 이를 통해 상대적으로 더 많은 컴퓨팅 파워를 가지는 믿을 수 있는 노드들의 컴퓨팅 파워를 통해 올바른 블록을 생성하게 됩니다.</p>
<h2><span id="네트워크의-동작">네트워크의 동작</span></h2><p>블록체인 네트워크는 다음과 같은 순서에 따라 이루어 집니다.</p>
<ol>
<li>모든 transactions 는 모든 노드에 전파된다.</li>
<li>모든 노드는 각 트랜잭션을 모아서 블럭을 구성한다.</li>
<li>각 노드는 만든 블럭의 해시를 풀어낼 nonce 값을 찾기 위해 연산을 시작한다.</li>
<li>어떤 노드가 nonce를 찾아냈다면 다른 모든 노드에게 자신이 가진 블록을 전파한다.</li>
<li>블록을 받은 노드들은 받은 블록 안의 모든 트랜잭션들이 유효하고 이미 지불된 것이 아닐 때에만 블록을 받는다.</li>
<li>블록을 받은 노드들은 받은 블록의 해쉬값을 previous hash로 하는 새로운 블록은 만드는 것에 착수함으로써 다른 노드들에게 해당 블록을 승인하였음을 알린다.</li>
<li>만약 노드가 동시에 두개의 블록을 받는다면 처음 받은 블록을 기준으로 작업을 시작하지만 이후로 받은 블록들도 저장해 둔다. 이렇게 여러 블록들은 개별적인 브랜치를 형성하고 특정 브랜치가 길어지면 가장 긴 브랜치의 블록들을 승인하여 체인을 이어간다.</li>
</ol>
<p>만약 노드가 다음 블록을 받지 못했다 하더라도 문제가 되지 않는데, 이는 그 다음 블록을 받게 되면 노드 자체가 자신이 받지 못한 블록을 인지하고 다른 노드들에게 이를 요청하기 때문이다. 또한 모든 트랜잭션들을 매우 많아서 빠트리면 트랜잭션이 있더라도 블록들은 계속 생성되기 때문에 빠트린 transaction들은 무시되고 넘어간다.</p>
<h2><span id="보상의-원리">보상의 원리</span></h2><p>블록체인 시스템의 참여자들을 컴퓨팅 파워를 통해 그 신뢰가 유지되는 시스템이므로, 모든 참여자들이 계속해서 컴퓨팅 파워를 제공하도록 동기 부여 하기 위해 인센티브를 부여하며, 이는 바로 블록을 생성한 노드에게 최초의 트랜잭션을 발행하도록 하는 것으로 이것이 우리가 일반적으로 알고있는 코인의 채굴하는 과정이 됩니다.</p>
<h2><span id="화폐가치의-분할">화폐가치의 분할</span></h2><p>위 내용에서와 같이 우리는 모든 코인은 그 전의 소유자들의 정보를 가진다고 알아보았으며, 이는 현실 세계에서 특정 1달러 지폐에 이제까지의 소유자들이 적혀있는 것에 비유될 수 있다고 하였습니다. 하지만 좀 더 작은 단위 혹은 더 큰 단위의 돈을 송금하는 경우를 생각해 보면, 1달러 지폐 하나를 다른 누군가 혹은 수십명의 다른 사람들과 공유하는 것을 생각할 수 있습니다.</p>
<p>이것은 하나의 transaction이 여러 개의 input 및 output value를 가짐으로써 해결 될 수 있는데, 하나의 transaction은 다른 여러 사람들에게 지불될 수 있으며 모든 내용이 하나의 transaction에 작성되어 있도록 하는 것입니다. 쉽게 말하면 1달러 지폐를 현재 가지고 있는 사람이 복수 명이 되어도 괜찮다는 것으로 생각될 수 있습니다.</p>
<p>이번 포스트에서는 사토시 나카모토의 논물을 쉽게 요약하여 블록체인의 핵심 원리에 대해 알아보았습니다.</p>
<p>가상화폐 시장의 열기가 죽어가는 현 시점이지만, 블록체인의 효용과 사토시 나카모토가 만들고자 했던 새로운 화폐경제 시스템의 가치는 보존되었으면 하는 바람으로 글을 마칩니다.</p>
<p>LNH</p>

                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2018/12/04/getting-started-with-graphql/" itemprop="url">
                Getting started with GraphQL
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2018-12-04T01:14:43.000Z" itemprop="datePublished">
                10 months ago
            </time>
        </span>
        
            <span class="column is-narrow article-category">
                <i class="far fa-folder"></i>
                <a class="article-category-link" href="/categories/graphql/">graphql</a>
            </span>
            
                
                    <span class="column is-narrow">
                        
                            
                                a minute read (About 123 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <h2><span id="queries-and-mutations">Queries and Mutations</span></h2><p>GraphQL 서버에 어떻게 query 할 것인가?</p>
<p><strong>example query</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    hero&#123;</span><br><span class="line">        name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>arguments</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    human(id: &quot;1000&quot;)&#123;</span><br><span class="line">        name</span><br><span class="line">        height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>alias</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    empireHero: hero(episode: EMPIRE)&#123;</span><br><span class="line">        name</span><br><span class="line">    &#125;</span><br><span class="line">    jediHero:hero(eposode:JEDI)&#123;</span><br><span class="line">        name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>fragments</strong></p>
<p>reusable units called fragments</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">query HeroComparison($first: Int = 3)&#123;</span><br><span class="line">    leftComparison: hero(episode: EMPIRE)&#123;</span><br><span class="line">        ...comparisonFields</span><br><span class="line">    &#125;</span><br><span class="line">    rightComparison: hero(episode: JEDI)&#123;</span><br><span class="line">        ...comparisonFields</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment comparisonFields on Character&#123;</span><br><span class="line">    name</span><br><span class="line">    friendConnection(first: $first)&#123;</span><br><span class="line">        totalCount</span><br><span class="line">        edges&#123;</span><br><span class="line">            node&#123;</span><br><span class="line">                name</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>varables</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query HeroNameAndFriends($episode: Episode)&#123;</span><br><span class="line">    hero(eposide: $episode)&#123;</span><br><span class="line">        name</span><br><span class="line">        friends&#123;</span><br><span class="line">            name</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>now, in our client code <strong>we can simply pass a different variable</strong> rather than needing to constructor an entirely new query. </p>
<p><strong>directives</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query Hero($episode: Episode, $withFriends: hero(episode: $episode)&#123;</span><br><span class="line">    hero(episode: $episode)&#123;</span><br><span class="line">        name</span><br><span class="line">        friends @include(if:$withFriends)&#123;</span><br><span class="line">            name</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2><span id="schemas-and-types">Schemas and Types</span></h2><h2><span id="validation">Validation</span></h2><h2><span id="execution">Execution</span></h2><h2><span id="introspection">Introspection</span></h2>
                        
    </div>
    
            
</article>



        
    
        <article class="article content gallery" itemscope="" itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2018/11/28/getting-started-with-embeded-linux/" itemprop="url">
                Getting started with Embeded Linux
            </a>
            
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2018-11-28T14:32:30.000Z" itemprop="datePublished">
                10 months ago
            </time>
        </span>
        
                
                    <span class="column is-narrow">
                        
                            
                                3 minutes read (About 395 words)
                    </span>
                    
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
        
                    <h2><span id="임베디드-시스템-개발-환경">임베디드 시스템 개발 환경</span></h2><p>임베디드 시스템을 개발하기 위해서는 기본적으로 임베디드 스템 개발을 위한 컴퓨터인 <strong>호스트 PC</strong>와 실제 임베디드 시스템이 설치된 개발하고자 하는 하드웨어인 <strong>Target PC</strong>가 있어야 한다.</p>
<p>타깃에는 호스트에서 만들어져서 설치된 여러 컴포넌트와 타깃을 부팅하기 위한 부트로더와 커널 그리고 임베디드 응용 프로그램이 존재하게 된다.</p>
<p>호스트에 설치된 개발 툴에는 타깃에서 수행될 수 있는 바이너리를 생성하는 크로스 컴파일러가 존재한다.</p>
<p>임베디드 시스템 개발 과정</p>
<ol>
<li>부트로더 개발</li>
<li>커널 및 파일 시스템 개발</li>
<li>응용 프로그램 개발</li>
</ol>
<p><strong>부트 로드 개발</strong></p>
<p>타깃 보드에 전원이 인가되면 부트 롬으로부터 가장 먼저 수행되는 프로그램이다.</p>
<p>OS 의 커널을 로드한다.</p>
<p><strong>커널 및 디바이스 드라이버 및 파일 시스템 개발</strong></p>
<p>호스트 피씨에서 개발되며 하나의 이미지 파일 형태로 부트 롬에 저장되거나 별도의 저장 장치에 파일 시스템을 통한 파일 형태로 구현된다.</p>
<p><strong>임베디드 응용 프로그램</strong></p>
<p>호스트에서 개발하며 호스트의 크로스 컴파일러에 의해 타깃 보드에 맞는 바이너리가 생성된다.</p>

                        
    </div>
    
            
</article>



        
    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous">
        <a href="/page/4/">Prev</a>
    </div>
    <div class="pagination-next">
        <a href="/page/6/">Next</a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link" href="/">1</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/page/4/">4</a></li>
        
        <li><a class="pagination-link is-current" href="/page/5/">5</a></li>
        
        <li><a class="pagination-link" href="/page/6/">6</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/page/23/">23</a></li>
        
    </ul>
</nav>
    
    </div>
</section>

            <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2019 Jake.Lee 이남훈&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" href="https://github.com/frontalnh">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
                <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        //plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110077250-2"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-110077250-2');
</script>


    


<script src="/js/script.js"></script>

                    
                        <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
                            
</body>

</html>